<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <title>Ortografia</title>
    <style>
        .lettercell {
        table-layout:fixed;
        width:20px;
        overflow:hidden;
        word-wrap:break-word;
        }
        .btn {
            background-color: rgb(161, 56, 152);
            color: white;
            border: none;
            cursor: pointer;
            padding: 2px 12px 3px 12px;
            text-decoration: none;
        }
        .rowB {
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
            margin-left: -10px;
            margin-right: -10px;
        }
        .answer_good {
            background-color: rgb(168, 201, 177);
            color: #034b1e;
        }
        .answer_bad {
            background-color: rgb(204, 160, 160);
            color: #ae0505;
        }
        .answer_pending {
            background-color: rgb(204, 204, 195);
            color: black;
        }
    </style>
</head>
	
<body onKeyPress="return handleEnterKey(event)">

    <div class="container" >
      
    <div class="jumbotron">
        <h4>Nauka ortografii</h4>
    </div>

    <div class="row"> 
        <div class="col">
            Zadanie nr <span id="quest_no_title">1</span> (zadania z <span id="quest_type">"H" i "CH"</span>):
            <hr/>
        </div>
    </div>


    <div class="row" id="quest">
        <table class="table table-bordered">
            <tr>
                <td hidden="true" id="letter_0" class="lettercell"></td>
                <td hidden="true" id="letter_1" class="lettercell"></td>
                <td hidden="true" id="letter_2" class="lettercell"></td>
                <td hidden="true" id="letter_3" class="lettercell"></td>
                <td hidden="true" id="letter_4" class="lettercell"></td>
                <td hidden="true" id="letter_5" class="lettercell"></td>
                <td hidden="true" id="letter_6" class="lettercell"></td>
                <td hidden="true" id="letter_7" class="lettercell"></td>
                <td hidden="true" id="letter_8" class="lettercell"></td>
                <td hidden="true" id="letter_9" class="lettercell"></td>
                <td hidden="true" id="letter_10" class="lettercell"></td>
                <td hidden="true" id="letter_11" class="lettercell"></td>
                <td hidden="true" id="letter_12" class="lettercell"></td>
            </tr>
        </table>
    </div>

    <dic class="row rowB" id="answer_row">
        <div class="col-3"></div>

        <div class="col-2 input-group input-group-lg">
            <button onclick="answerA()" class="btn" id="answerA">CH</button>
        </div>
        <div class="col-1"></div>
        <div class="col-2 input-group input-group-lg">
            <button onclick="answerB()" class="btn" id="answerB">H</button>
        </div>
        <div class="col-4"></div>
    </dic>

    <div class="row rowB" id="answ_ok" hidden="true">
        <div class="col-8" style="font-weight: bold; font-size: large; color: green; text-align:center"> 
		    Dobrze! <span id="emot_good">游</span>
        </div>
		<div class="col-4">
			<button class="btn btn-secondary btn-block" onclick="prepare()" >Dalej</button>    
		</div>
    </div>

    <div class="row rowB" id="answ_bad" hidden="true">
        <div class="col-8" style="font-weight: bold; font-size: large; color: red; text-align:center"> 
		    Niestety, z켹a odpowied콬 <span id="emot_bad">游땩</span>
        </div>
		<div class="col-4">
                <button class="btn btn-secondary btn-block" onclick="prepare()" >Dalej</button>    
        </div>
    </div>

    <div class="row">
        <div class="col">
            <hr/>
        </div>
    </div>

    <div class="row">
            <div class="col">
                <a href="#" data-toggle="modal" data-target="#setWordList" role="button">Wybierz zestaw zada켻..</a> 
                <br/>
                <a href="#" data-toggle="modal" data-target="#showErrs" role="button">Poka콮 b켹캧dy...</a>
                <hr/>
            </div>
    </div>

    <div class="row">
        <div class="col">
                <span style="text-decoration:underline">Statystyki:</span> <br/>
                Liczba zada켻: <span id="quests_no">0</span> <br/>
                Poprawnych odpowiedzi: <span id="oks_no">0</span> <br/>
                B켹캧dnych odpowiedzi: <span id="errs_no">0</span> <br/>
        </div>
	</div>
	
    <div class="row">
        <div class="col" style="font-size: small; text-align:right">
                v. 1.1.0
                <a href="https://progoza.github.io" style="font-size: small; text-align:right">progoza.github.io</a>
        </div>
    </div>

    <script>
        var buttonA = "CH";
        var buttonB = "H";
        var aWord = "";
        var answer = "";
        var questNo = 0;
        var correctAnswers = 0;
        var wrongAnswers = 0;
        var appState = 0;
        var wordsList01 = [];
        var wordsList02 = [];
        var wordsList03= [];
        initializeWordsList();
        var wordsList = wordsList01;
        var previousRandomIndex = -1;

        var emots_good = ["游땙", "游땕", "游녨", "游눩", "游냒", "游깯", "鮫봺잺", "游뱔", "游떀", "游뱅"];
        var emots_bad = ["游땩", "游", "游땞", "游땰", "游땪","游뗼", "游땸", "游녩", "游눨", "游눖"];

        function reset() {
            aWord = "";
            answer = "";
            questNo = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            appState = 0;
            document.getElementById("list_of_errors").innerHTML = "Jak na razie nie ma 콮adnych b켹캧d칩w!";
        }

        function prepare() {
            var randomIndex = Math.floor(Math.random() * wordsList.length);
            if (randomIndex === previousRandomIndex) {
                randomIndex = (randomIndex + 1) % wordsList.length;
            }
            previousRandomIndex = randomIndex;
            aWord = wordsList[randomIndex].word;
            answer = wordsList[randomIndex].answer;
            questNo++;      
            appState = 0;
            for (var i=0; i<aWord.length; i++) {
                var letterId = "letter_" + i;
                document.getElementById(letterId).innerHTML = aWord.toUpperCase().charAt(i);
                document.getElementById(letterId).hidden = false;
                if (aWord.charAt(i) === "_") {
                    document.getElementById(letterId).innerHTML = '<input type="text" id="answer" autocapitalize="on" maxlength="2" size="2" autofocus />';
                }
            }
            for (var j=aWord.length; j<13; j++) {
                var letterId2 = "letter_" + j;
                document.getElementById(letterId2).innerHTML = "";
                document.getElementById(letterId2).hidden = true;
            }
            document.getElementById("answ_ok").hidden = true;
            document.getElementById("answ_bad").hidden = true;
            document.getElementById("answer_row").hidden = false;
            document.getElementById("answer_row").focus();
            document.getElementById("answer").classList.remove("answer_good");
            document.getElementById("answer").classList.remove("answer_bad");
            document.getElementById("answer").classList.add("answer_pending");
        };


        function check() {
            document.getElementById("emot_good").innerHTML = emots_good[Math.floor(Math.random() * emots_good.length)];
            document.getElementById("emot_bad").innerHTML = emots_bad[Math.floor(Math.random() * emots_bad.length)];
            var userAnswer = document.getElementById("answer").value;
            document.getElementById("answer").classList.remove("answer_pending");
            if (userAnswer.toLowerCase() === answer.toLowerCase()) {
                correctAnswers++;
                document.getElementById("answ_ok").hidden = false;
                document.getElementById("answ_bad").hidden = true;
                document.getElementById("answer_row").hidden = true;
                document.getElementById("answer").classList.add("answer_good");
            } else {
                wrongAnswers++;
                var errorEntry = "<li>" + aWord.replace("_", "<b>__</b>") + " (prawid켹owa odpowied콬: <b>" + answer + "</b>)</li>";
                if (wrongAnswers === 1) { 
                    document.getElementById("list_of_errors").innerHTML = errorEntry;
                } else {
                    document.getElementById("list_of_errors").innerHTML += errorEntry;
                }
                document.getElementById("answ_ok").hidden = true;
                document.getElementById("answ_bad").hidden = false;
                document.getElementById("answer_row").hidden = true;
                document.getElementById("answer").classList.add("answer_bad");
            }
            appState = 1;
            updateStats();
        };

        function updateStats() {
            document.getElementById("quest_no_title").innerHTML = questNo;
            document.getElementById("quests_no").innerHTML = questNo;
            document.getElementById("oks_no").innerHTML = correctAnswers;
            document.getElementById("errs_no").innerHTML = wrongAnswers;
        };

        function answerA() {
            document.getElementById("answer").value = buttonA;
            check();
        }

        function answerB() {
            document.getElementById("answer").value = buttonB;
            check();
        }   

        function handleEnterKey(e) {
            if((e && e.keyCode == 13) || e == 0) {
                if (appState===0) {
                    check();
                }  else if (appState===1) {
                    prepare();
                }
            }
        }

        function setWordList01() {
            wordsList = wordsList01;
            buttonA = "CH";
            buttonB = "H";
            reset();
            prepare();
            updateStats();
            document.getElementById("answerA").innerHTML = buttonA;
            document.getElementById("answerB").innerHTML = buttonB;
            document.getElementById("quest_type").innerHTML = "\"H\" i \"CH\"";
        };

        function setWordList02() {
            wordsList = wordsList02;
            buttonA = "RZ";
            buttonB = "콭";
            reset();
            prepare();
            updateStats();
            document.getElementById("answerA").innerHTML = buttonA;
            document.getElementById("answerB").innerHTML = buttonB;
            document.getElementById("quest_type").innerHTML = "\"RZ\" i \"콭\"";
        };

        function setWordList03() {
            wordsList = wordsList03;
            buttonA = "U";
            buttonB = "칍";
            reset();
            prepare();
            updateStats();
            document.getElementById("answerA").innerHTML = buttonA;
            document.getElementById("answerB").innerHTML = buttonB;
            document.getElementById("quest_type").innerHTML = "\"U\" i \"칍\"";
        };


        function initializeWordsList() {
            wordsList01 = [
                { "word": "_u콑tawka", "answer": "h" },
                { "word": "sza_y", "answer": "ch" },
                { "word": "_alka", "answer": "h" },
                { "word": "du_", "answer": "ch" },
                { "word": "_mura", "answer": "ch" },
                { "word": "_leb", "answer": "ch" },
                { "word": "_a켹as", "answer": "h" },
                { "word": "o_ota", "answer": "ch" },
                { "word": "_or캔giew", "answer": "ch" },
                { "word": "_ytry", "answer": "ch" },
                { "word": "_erbatnik", "answer": "h" },
                { "word": "_ojrak", "answer": "ch" },
                { "word": "_luba", "answer": "ch" },
                { "word": "plu_a", "answer": "ch" },
                { "word": "o_roni캖", "answer": "ch" },
                { "word": "fil_armonia", "answer": "h" },
                { "word": "_ulajnoga", "answer": "h" },
                { "word": "mu_a", "answer": "ch" },
                { "word": "_odowla", "answer": "h" },
                { "word": "_ojny", "answer": "h" },
                { "word": "_rupki", "answer": "ch" },
                { "word": "_arakter", "answer": "ch" },
                { "word": "_oinka", "answer": "ch" },
                { "word": "dru_", "answer": "h" },
                { "word": "_켹opak", "answer": "ch" },
                { "word": "_a켹as", "answer": "h" },
                { "word": "_amak", "answer": "h" },
                { "word": "bo_ater", "answer": "h" },
                { "word": "_istoria", "answer": "h" },
                { "word": "_ipopotam", "answer": "h" },
                { "word": "_캧캖", "answer": "ch" },
                { "word": "_uligan", "answer": "ch" },
                { "word": "_obby", "answer": "h" },
                { "word": "_켹odny", "answer": "ch" },
                { "word": "_otel", "answer": "h" },
                { "word": "mar_ewka", "answer": "ch" }
            ];

            wordsList02 = [
        
                    { "word": "_aba", "answer": "콮" },
                    { "word": "ma_enie", "answer": "rz" },
                    { "word": "ko_y콑캖", "answer": "rz" },
                    { "word": "wie_a", "answer": "콮" },
                    { "word": "pa_ysta", "answer": "rz" },
                    { "word": "bie_nia", "answer": "콮" },
                    { "word": "_eglowa캖", "answer": "콮" },
                    { "word": "obro_a", "answer": "콮" },
                    { "word": "pla_a", "answer": "콮" },
                    { "word": "t_ask", "answer": "rz" },
                    { "word": "_urek", "answer": "콮" },
                    { "word": "je_", "answer": "콮" },
                    { "word": "u_캔dzenie", "answer": "rz" },
                    { "word": "spo_캔dzi캖", "answer": "rz" },
                    { "word": "bu_a", "answer": "rz" },
                    { "word": "ja_캧bina", "answer": "rz" },
                    { "word": "ja_yny", "answer": "rz" },
                    { "word": "Kata_yna", "answer": "rz" },
                    { "word": "ko_e켻", "answer": "rz" },
                    { "word": "ku_", "answer": "rz" },
                    { "word": "Ma_anna", "answer": "rz" },
                    { "word": "na_eka캖", "answer": "rz" },
                    { "word": "na_캧dzia", "answer": "rz" },
                    { "word": "odku_acz", "answer": "rz" },
                    { "word": "o_ech", "answer": "rz" },
                    { "word": "po_캔dek", "answer": "rz" },
                    { "word": "po_eczka", "answer": "rz" },
                    { "word": "_adki", "answer": "rz" },
                    { "word": "_ecz", "answer": "rz" },
                    { "word": "_eka", "answer": "rz" },
                    { "word": "_epa", "answer": "rz" },
                    { "word": "_odkiewka", "answer": "rz" },
                    { "word": "_uca캖", "answer": "rz" },
                    { "word": "tale_", "answer": "rz" },
                    { "word": "twa_", "answer": "rz" },
                    { "word": "ude_enie", "answer": "rz" },
                    { "word": "wa_ywa", "answer": "rz" },
                    { "word": "wie_ba", "answer": "rz" },
                    { "word": "wie_cho켹ek", "answer": "rz" },
                    { "word": "zda_enie", "answer": "rz" },
                    { "word": "zwie_캧", "answer": "rz" },
                    { "word": "baga_", "answer": "콮" },
                    { "word": "banda_", "answer": "콮" },
                    { "word": "ba_ant", "answer": "콮" },
                    { "word": "bi_uteria", "answer": "콮" },
                    { "word": "ci캧_ar", "answer": "콮" },
                    { "word": "doro_ka", "answer": "콮" },
                    { "word": "du_y", "answer": "콮" },
                    { "word": "fili_anka", "answer": "콮" },
                    { "word": "gara_", "answer": "콮" },
                    { "word": "gdy_", "answer": "콮" },
                    { "word": "je_yny", "answer": "콮" },
                    { "word": "ka켹u_a", "answer": "콮" },
                    { "word": "ka_dy", "answer": "콮" },
                    { "word": "ksi캧_yc", "answer": "콮" },
                    { "word": "켹y_ka", "answer": "콮" },
                    { "word": "켹y_wy", "answer": "콮" },
                    { "word": "nale_y", "answer": "콮" },
                    { "word": "no_yczki", "answer": "콮" },
                    { "word": "n칩_", "answer": "콮" },
                    { "word": "pasa_er", "answer": "콮" },
                    { "word": "pi_ama", "answer": "콮" },
                    { "word": "poniewa_", "answer": "콮" },
                    { "word": "po_ar", "answer": "콮" },
                    { "word": "po_ycza캖", "answer": "콮" },
                    { "word": "po_ytek", "answer": "콮" },
                    { "word": "r칩wnie_", "answer": "콮" },
                    { "word": "ry_", "answer": "콮" },
                    { "word": "spi_arnia", "answer": "콮" },
                    { "word": "콑wie_y", "answer": "콮" },
                    { "word": "te_", "answer": "콮" },
                    { "word": "wa_ka", "answer": "콮" },
                    { "word": "w캔_", "answer": "콮" },
                    { "word": "wie_a", "answer": "콮" },
                    { "word": "witra_", "answer": "콮" },
                    { "word": "wra_enie", "answer": "콮" },
                    { "word": "z켹o_y캖", "answer": "콮" },
                    { "word": "_캔da캖", "answer": "콮" },
                    { "word": "_eby", "answer": "콮" },
                    { "word": "_agiel", "answer": "콮" },
                    { "word": "_egna캖", "answer": "콮" },
                    { "word": "_elazko", "answer": "콮" },
                    { "word": "_칩켹tko", "answer": "콮" },
                    { "word": "Gra_yna", "answer": "콮" }
                ];                

            wordsList03 = [
                { "word":"j_콮", "answer": "u" },
                { "word":"b_t", "answer": "u" },
                { "word":"m_cha", "answer": "u" },
                { "word":"k_ra", "answer": "u" }, 
                { "word":"autob_s", "answer": "u" },
                { "word":"komp_ter", "answer": "u" },
                { "word":"m_szelka", "answer": "u" },
                { "word":"b_rza", "answer": "u" },
                { "word":"_branie", "answer": "u" },
                { "word":"b_telka", "answer": "u" },
                { "word":"k_bek", "answer": "u" },
                { "word":"kr_l", "answer": "칩" },
                { "word":"w_zek", "answer": "칩" },
                { "word":"ch_r", "answer": "칩" },
                { "word":"pr_ba", "answer": "칩" },
                { "word":"g_rka", "answer": "칩" },
                { "word":"b_l", "answer": "칩" },
                { "word":"st_켹", "answer": "칩" },
                { "word":"kt_ry", "answer": "칩" },
                { "word":"m_wi캖", "answer": "칩" },
                { "word": "c_rka", "answer": "칩" },
                { "word": "dop_ki", "answer": "칩" },
                { "word": "g_ra", "answer": "칩" },
                { "word": "jask_켹ka", "answer": "칩" },
                { "word": "J_zef", "answer": "칩" },
                { "word": "k켹_dka", "answer": "칩" },
                { "word": "k_tnia", "answer": "칩" },
                { "word": "kr_l", "answer": "칩" },
                { "word": "kr_lik", "answer": "칩" },
                { "word": "m_zg", "answer": "칩" },
                { "word": "og_rek", "answer": "칩" },
                { "word": "o켹_wek", "answer": "칩" },
                { "word": "opr_cz", "answer": "칩" },
                { "word": "p켹_tno", "answer": "칩" },
                { "word": "p_켹ka", "answer": "칩" },
                { "word": "p_콬no", "answer": "칩" },
                { "word": "pr_ba", "answer": "칩" },
                { "word": "przepi_rka", "answer": "칩" },
                { "word": "r_wny", "answer": "칩" },
                { "word": "sk_ra", "answer": "칩" },
                { "word": "szczeg_켹", "answer": "칩" },
                { "word": "tch_rz", "answer": "칩" },
                { "word": "wiewi_rka", "answer": "칩" },
                { "word": "wr_bel", "answer": "칩" },
                { "word": "콬r_d켹o", "answer": "칩" },
                { "word": "콮_켹ty", "answer": "칩" },
                { "word": "콮_켹w", "answer": "칩" },
                { "word": "m_r", "answer": "u" },
                { "word": "c_kier", "answer": "u" },
                { "word": "m_cha", "answer": "u" },
                { "word": "d_ma", "answer": "u" },
                { "word": "n_ta", "answer": "u" },
                { "word": "r_ra", "answer": "u" },
                { "word": "t켹_m", "answer": "u" },
                { "word": "b_zia", "answer": "u" },
                { "word": "b_dynek", "answer": "u" },
                { "word": "k_chnia", "answer": "u" },
                { "word": "b_rak", "answer": "u" },
                { "word": "s_fit", "answer": "u" },
                { "word": "k_pi캖", "answer": "u" },
                { "word": "sz_ka캖", "answer": "u" },
                { "word": "mal_je", "answer": "u" },
                { "word": "l_pa", "answer": "u" }               
            ];
        };
        prepare();
    </script>

<div  class="modal fade" id="showErrs" tabindex="-1" role="dialog" aria-labelledby="showErrsTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">S켹칩wka, w kt칩rych by켹 b켹캔d:</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                    <ul id="list_of_errors">
                            Jak na razie nie ma 콮adnych b켹캧d칩w!
                    </ul>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-dismiss="modal">Zamknij</button>
            </div>
          </div>
        </div>
</div>

<div  class="modal fade" id="setWordList" tabindex="-1" role="dialog" aria-labelledby="setWordListTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Prosz캧 ustaw zestaw s켹칩wek:</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p><span style="font-size: small">Ustawienie nowego zestawu wyzeruje statystyki.</span></p>
              <button type="button" class="btn btn-primary" onclick="setWordList01()" data-dismiss="modal">H i CH</button>
              <button type="button" class="btn btn-primary" onclick="setWordList02()" data-dismiss="modal">RZ i 콭</button>
              <button type="button" class="btn btn-primary" onclick="setWordList03()" data-dismiss="modal">U i 칍</button>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Anuluj</button>
            </div>

        </div>
        </div>
</div>
</body>
</html>